# BRL-ARS Arbitrage Monitor - Documentaci√≥n T√©cnica

**Versi√≥n:** 0.0.0  
**Fecha:** 19 de Diciembre, 2025

---

## üìã Descripci√≥n General

BRL-ARS Arbitrage Monitor es una aplicaci√≥n web dise√±ada para el monitoreo de tasas de cambio y gesti√≥n de propiedades de alquiler. Combina funcionalidades de seguimiento de arbitraje de criptomonedas (BRL/ARS) con un sistema completo de administraci√≥n de reservas, ingresos y gastos.

---

## üõ†Ô∏è Stack Tecnol√≥gico

### Core
| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|------------|---------|-----------|
| React | ^19.2.3 | Framework UI |
| TypeScript | ~5.8.2 | Tipado est√°tico |
| Vite | ^6.2.0 | Build tool y dev server |
| React Router DOM | ^7.10.1 | Enrutamiento SPA |

### Backend & Base de Datos
| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|------------|---------|-----------|
| Firebase | ^12.6.0 | Autenticaci√≥n y Firestore DB |

### Visualizaci√≥n
| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|------------|---------|-----------|
| Lightweight Charts | ^5.0.9 | Gr√°ficos de precios |

---

## üìÅ Estructura del Proyecto

```
boceto-Arbitrage-Monitor/
‚îú‚îÄ‚îÄ App.tsx                 # Componente principal con rutas
‚îú‚îÄ‚îÄ index.tsx               # Punto de entrada
‚îú‚îÄ‚îÄ index.html              # HTML base
‚îú‚îÄ‚îÄ types.ts                # Definiciones de tipos TypeScript
‚îú‚îÄ‚îÄ vite.config.ts          # Configuraci√≥n de Vite
‚îú‚îÄ‚îÄ tsconfig.json           # Configuraci√≥n de TypeScript
‚îú‚îÄ‚îÄ firebase.json           # Configuraci√≥n de Firebase
‚îú‚îÄ‚îÄ firestore.rules         # Reglas de seguridad Firestore
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Layout.tsx          # Layout principal con navegaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ PriceChart.tsx      # Gr√°fico de precios con lightweight-charts
‚îÇ   ‚îú‚îÄ‚îÄ StatCard.tsx        # Tarjetas de estad√≠sticas
‚îÇ   ‚îú‚îÄ‚îÄ Calendar/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CalendarMonthView.tsx  # Vista de calendario mensual
‚îÇ   ‚îî‚îÄ‚îÄ forms/
‚îÇ       ‚îú‚îÄ‚îÄ BookingForm.tsx    # Formulario de reservas
‚îÇ       ‚îú‚îÄ‚îÄ ExpenseForm.tsx    # Formulario de gastos
‚îÇ       ‚îî‚îÄ‚îÄ IncomeForm.tsx     # Formulario de ingresos
‚îÇ
‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx     # Contexto de autenticaci√≥n
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useBookings.ts      # Hook para gesti√≥n de reservas
‚îÇ   ‚îú‚îÄ‚îÄ useExpenses.ts      # Hook para gesti√≥n de gastos
‚îÇ   ‚îú‚îÄ‚îÄ useIncome.ts        # Hook para gesti√≥n de ingresos
‚îÇ   ‚îú‚îÄ‚îÄ usePriceHistory.ts  # Hook para historial de precios
‚îÇ   ‚îî‚îÄ‚îÄ useRealTimeRates.ts # Hook para tasas en tiempo real
‚îÇ
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ [utilidades]
‚îÇ
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ DashboardPage.tsx   # P√°gina principal
‚îÇ   ‚îú‚îÄ‚îÄ CalendarPage.tsx    # P√°gina de calendario
‚îÇ   ‚îú‚îÄ‚îÄ BookingsPage.tsx    # P√°gina de reservas
‚îÇ   ‚îú‚îÄ‚îÄ FinancesPage.tsx    # P√°gina de finanzas
‚îÇ   ‚îú‚îÄ‚îÄ RatesPage.tsx       # P√°gina de tasas de cambio
‚îÇ   ‚îî‚îÄ‚îÄ LoginPage.tsx       # P√°gina de login
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ binanceService.ts      # Servicio API de Binance
‚îÇ   ‚îú‚îÄ‚îÄ binanceWebSocket.ts    # WebSocket para datos en tiempo real
‚îÇ   ‚îî‚îÄ‚îÄ bookingIncomeService.ts # Servicio de ingresos por reservas
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ N8N_WORKFLOW_SETUP.md  # Documentaci√≥n de workflows N8N
```

---

## üîê Sistema de Autenticaci√≥n

La aplicaci√≥n implementa un sistema de autenticaci√≥n con Firebase Auth:

- **ProtectedRoute**: Wrapper que protege rutas que requieren autenticaci√≥n
- **PublicRoute**: Wrapper para rutas p√∫blicas (redirige a home si ya est√° autenticado)
- **AuthContext**: Contexto React para manejo global del estado de autenticaci√≥n

---

## üìä Modelos de Datos

### Tasas de Cambio (Arbitrage Monitor)

```typescript
interface ExchangeRates {
  usdtBrl: number;    // USDT/BRL
  btcArs: number;     // BTC/ARS
  btcUsdt: number;    // BTC/USDT
}

interface CalculatedRates {
  usdtArs: number;    // USDT/ARS impl√≠cito (D√≥lar Crypto)
  brlUsdt: number;    // Valor de 1 BRL en USDT
  brlArs: number;     // BRL -> ARS impl√≠cito final
}
```

### Reservas (Bookings)

```typescript
interface Booking {
  id: string;
  guestName?: string;
  checkIn: Timestamp;
  checkOut: Timestamp;
  rentalType: 'daily' | 'monthly';
  dailyRate?: number;
  monthlyRate?: number;
  totalBRL: number;
  depositAmount: number;     // 30% del total
  depositPaid: boolean;
  remainingAmount: number;   // 70% restante
  platform: 'airbnb' | 'booking' | 'direct' | 'other';
  status: 'confirmed' | 'pending' | 'cancelled' | 'completed';
  notes?: string;
  createdAt: Timestamp;
  updatedAt?: Timestamp;
}
```

### Ingresos (Income)

```typescript
interface Income {
  id: string;
  bookingId?: string;
  date: Timestamp;
  amountBRL: number;
  amountUSDT?: number;
  amountARS?: number;
  tcUsed?: number;
  category: 'rental' | 'deposit' | 'other';
  description: string;
  isConfirmed: boolean;
  createdAt: Timestamp;
}
```

### Gastos (Expenses)

```typescript
interface Expense {
  id: string;
  date: Timestamp;
  amountBRL: number;
  category: ExpenseCategory;
  description: string;
  isPaid: boolean;
  dueDate?: Timestamp;
  isRecurring: boolean;
  recurringDay?: number;
  createdAt: Timestamp;
}
```

**Categor√≠as de Gastos:**
- IPTU
- Ambiental
- Condominio
- Internet
- CELESC
- Reparaci√≥n
- Limpieza
- Mejoras
- Otro

---

## üåê Rutas de la Aplicaci√≥n

| Ruta | Componente | Acceso | Descripci√≥n |
|------|------------|--------|-------------|
| `/login` | LoginPage | P√∫blico | P√°gina de inicio de sesi√≥n |
| `/` | DashboardPage | Protegido | Dashboard principal |
| `/calendar` | CalendarPage | Protegido | Calendario de reservas |
| `/bookings` | BookingsPage | Protegido | Lista de reservas |
| `/finances` | FinancesPage | Protegido | Gesti√≥n financiera |
| `/rates` | RatesPage | Protegido | Monitor de tasas de cambio |

---

## ‚öôÔ∏è Configuraci√≥n

### Vite Config
- **Puerto de desarrollo:** 3000
- **Host:** 0.0.0.0 (accesible desde red local)
- **Alias:** `@/` apunta a la ra√≠z del proyecto

### TypeScript Config
- **Target:** ES2022
- **Module:** ESNext
- **JSX:** react-jsx
- **Module Resolution:** bundler

---

## üîó Integraciones Externas

### Binance
- Servicio REST API para obtener precios
- WebSocket para actualizaciones en tiempo real de tickers

### Firebase
- **Authentication:** Login/logout de usuarios
- **Firestore:** Base de datos para reservas, ingresos y gastos

### N8N (Opcional)
- Workflows de automatizaci√≥n documentados en `/docs/N8N_WORKFLOW_SETUP.md`

---

## üöÄ Scripts Disponibles

```bash
npm run dev      # Inicia servidor de desarrollo (puerto 3000)
npm run build    # Genera build de producci√≥n
npm run preview  # Preview del build de producci√≥n
```

---

## üìù Notas de la Versi√≥n 0.0.0

Esta es la versi√≥n inicial del proyecto que incluye:

- ‚úÖ Monitor de arbitraje BRL/ARS con datos de Binance
- ‚úÖ Sistema de autenticaci√≥n con Firebase
- ‚úÖ Gesti√≥n completa de reservas (CRUD)
- ‚úÖ Sistema de dep√≥sitos (30%) y pagos restantes (70%)
- ‚úÖ Calendario visual de reservas
- ‚úÖ Gesti√≥n de ingresos y gastos
- ‚úÖ Gr√°ficos de historial de precios
- ‚úÖ Categorizaci√≥n de gastos
- ‚úÖ Soporte para alquileres diarios y mensuales
